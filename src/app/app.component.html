<nz-layout>
    <nz-header>
        <ul nz-menu nzTheme="dark" nzMode="horizontal" nzSelectable="false">
            <li nz-menu-item class="logo">
                <i>{{ "AngularGB" | stringOnMobile: "AGB" }}</i>
            </li>
            <li nz-menu-item (click)="toggleDebug()">
                <i nz-icon nzType="bug" nzTheme="outline"></i> {{ "Debug" | stringOnMobile }}
            </li>
            <li nz-menu-item>
                <i nz-icon nzType="github" nzTheme="outline"></i> {{ "About" | stringOnMobile }}
            </li>
        </ul>
    </nz-header>
    <nz-content>
        <div class="inner-content">
            <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }" nzJustify="space-around">
                <div nz-col [nzSpan]="24" [nzLg]="12">
                    <app-gameboy #gameboy></app-gameboy> <br />

                    <nz-upload class="gb-control rom-select" nzAction="/intercepted" nzShowUploadList="false"
                        [(nzFileList)]="fileList" (nzChange)="handleChange($event)">
                        <button nz-button>
                            <i nz-icon nzType="upload"></i>Select ROM
                        </button>
                    </nz-upload> <br />

                    <nz-button-group class="gb-control">
                        <button nz-button [disabled]="!gameboy.isPaused()" (click)="gameboy.resume()">
                            <i nz-icon nzType="caret-right" nzTheme="outline"></i>
                        </button>
                        <button nz-button [disabled]="!gameboy.isPlaying()" (click)="gameboy.pause()">
                            <i nz-icon nzType="pause" nzTheme="outline"></i>
                        </button>
                    </nz-button-group> <br />

                    <nz-input-group *ngIf="isDebugging" class="gb-control" nzPrefix="Run number of steps"
                        [nzSuffix]="stepTemplate">
                        <nz-input-number [(ngModel)]="skipStepCnt" [nzDisabled]="!gameboy.isPaused()" [nzMin]="1"
                            [nzStep]="1">
                        </nz-input-number>
                        <ng-template #stepTemplate>
                            <button nz-button [disabled]="!gameboy.isPaused()" (click)="gameboy.step(skipStepCnt)">
                                <i nz-icon nzType="step-forward" nzTheme="outline"></i>
                            </button>
                        </ng-template>
                    </nz-input-group> <br />

                    <nz-input-group *ngIf="isDebugging" class="gb-control" nzPrefix="Run number of frames"
                        [nzSuffix]="stepTemplate">
                        <nz-input-number [(ngModel)]="skipFrameCnt" [nzDisabled]="!gameboy.isPaused()" [nzMin]="1"
                            [nzStep]="1">
                        </nz-input-number>
                        <ng-template #stepTemplate>
                            <button nz-button [disabled]="!gameboy.isPaused()" (click)="gameboy.frame(skipFrameCnt)">
                                <i nz-icon nzType="fast-forward" nzTheme="outline"></i>
                            </button>
                        </ng-template>
                    </nz-input-group>
                </div>

                <div *ngIf="isDebugging" nz-col [nzSpan]="24" [nzLg]="12">
                    <nz-tabset>
                        <nz-tab nzTitle="CPU State">
                            <app-cpu-state [gameboy]="gameboy"></app-cpu-state>
                        </nz-tab>
                        <nz-tab nzTitle="Disassembler">
                            <app-disassembler [gameboy]="gameboy"></app-disassembler>
                        </nz-tab>
                        <nz-tab nzTitle="Memory">
                            Memory
                        </nz-tab>
                        <nz-tab nzTitle="Interrupts">
                            Interrupts
                        </nz-tab>
                    </nz-tabset>
                </div>
            </div>
        </div>
    </nz-content>
    <nz-footer>AngularGB</nz-footer>
</nz-layout>